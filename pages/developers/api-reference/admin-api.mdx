# Admin & Developer API

Manage authentication, users, organizations, API keys, and subscriptions for your Integra integration.

**Base URL:** `https://api.trustwithintegra.com`

## OpenAPI Specification

Download the complete OpenAPI specification to use with your favorite API client:

- [Download OpenAPI Spec (YAML)](/openapi/admin-api.yaml)
- [View in Swagger UI](https://petstore.swagger.io/?url=https://78b67064.integra-documentation.pages.dev/openapi/admin-api.yaml)

## Quick Start

### Authentication

#### OAuth2 Authorization Code Flow

1. Redirect user to authorization URL:
   ```
   https://api.trustwithintegra.com/admin/oauth2/authorize
     ?client_id=YOUR_CLIENT_ID
     &redirect_uri=YOUR_REDIRECT_URI
     &response_type=code
     &scope=openid profile email
   ```

2. Exchange code for access token:
   ```bash
   curl -X POST https://api.trustwithintegra.com/admin/oauth2/token \
     -H "Content-Type: application/x-www-form-urlencoded" \
     -d "grant_type=authorization_code" \
     -d "code=AUTHORIZATION_CODE" \
     -d "client_id=YOUR_CLIENT_ID" \
     -d "client_secret=YOUR_CLIENT_SECRET" \
     -d "redirect_uri=YOUR_REDIRECT_URI"
   ```

#### API Key Authentication

```bash
curl https://api.trustwithintegra.com/v1/users/me \
  -H "Authorization: Bearer YOUR_API_KEY"
```

### Available Endpoints

#### Users
- `GET /v1/users/me` - Get current user profile
- `PATCH /v1/users/me` - Update current user profile
- `GET /v1/users/{userId}` - Get user by ID
- `POST /v1/users` - Create new user
- `DELETE /v1/users/{userId}` - Delete user

#### Organizations
- `GET /v1/organizations` - List all organizations
- `POST /v1/organizations` - Create new organization
- `GET /v1/organizations/{orgId}` - Get organization details
- `PATCH /v1/organizations/{orgId}` - Update organization
- `DELETE /v1/organizations/{orgId}` - Delete organization
- `GET /v1/organizations/{orgId}/members` - List organization members
- `POST /v1/organizations/{orgId}/members` - Add member to organization

#### API Keys
- `GET /v1/api-keys` - List all API keys
- `POST /v1/api-keys` - Create new API key
- `GET /v1/api-keys/{keyId}` - Get API key details
- `DELETE /v1/api-keys/{keyId}` - Revoke API key
- `PATCH /v1/api-keys/{keyId}` - Update API key

#### Subscriptions
- `GET /v1/subscriptions` - List all subscriptions
- `POST /v1/subscriptions` - Create new subscription
- `GET /v1/subscriptions/{subId}` - Get subscription details
- `PATCH /v1/subscriptions/{subId}` - Update subscription
- `DELETE /v1/subscriptions/{subId}` - Cancel subscription

## Using with Postman

Import the OpenAPI spec into Postman for interactive testing:

1. Open Postman
2. Click "Import" > "Link"
3. Paste: `https://78b67064.integra-documentation.pages.dev/openapi/admin-api.yaml`
4. Click "Import"

## Code Examples

### Create API Key

```typescript
const response = await fetch('https://api.trustwithintegra.com/v1/api-keys', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_AUTH_TOKEN',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    name: 'Production API Key',
    scopes: ['blockchain:read', 'documents:write']
  })
});

const apiKey = await response.json();
console.log(apiKey);
```

### Get User Profile

```python
import requests

response = requests.get(
    'https://api.trustwithintegra.com/v1/users/me',
    headers={'Authorization': 'Bearer YOUR_AUTH_TOKEN'}
)

user = response.json()
print(user)
```

## Support

Need help with the Admin API?
- ðŸ“§ Email: developers@integraledger.com
- ðŸ’¬ Discord: [Join our community](https://discord.gg/integra)
- ðŸ“š Guides: [Authentication Guide](../smart-contracts/getting-started)
