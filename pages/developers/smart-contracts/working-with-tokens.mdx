import { Tabs } from 'nextra/components'

# Working with Tokens

Learn how to tokenize documents using standard token formats (NFTs and fungible tokens).

## Why Tokenize Documents?

**Tokenization** converts documents or their rights into blockchain tokens that can be:
- **Traded**: Buy/sell ownership or licenses
- **Split**: Divide ownership among multiple parties
- **Tracked**: Monitor transfer history
- **Automated**: Use in DeFi protocols

## Token Types

### NFTs (ERC-721) - Unique Documents

Use for unique, one-of-a-kind documents:
- Real estate deeds
- Diplomas/certificates
- Original contracts

<Tabs items={['cURL', 'TypeScript', 'Python']}>
<Tabs.Tab>
```bash
# Mint unique document token
curl -X POST https://api.trustwithintegra.com/v1/tokens/nft/mint \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $API_KEY" \
  -d '{
    "ownerAddress": "0xabc...",
    "documentId": "deed-123",
    "metadata": {
      "name": "Property Deed #123",
      "description": "Real estate deed for 123 Main St"
    }
  }'

# Transfer ownership
curl -X POST https://api.trustwithintegra.com/v1/tokens/nft/transfer \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $API_KEY" \
  -d '{
    "tokenId": "123",
    "fromAddress": "0xabc...",
    "toAddress": "0xdef..."
  }'

# Check owner
curl -X GET "https://api.trustwithintegra.com/v1/tokens/nft/123/owner" \
  -H "Authorization: Bearer $API_KEY"
```
</Tabs.Tab>

<Tabs.Tab>
```typescript
// Mint unique document token
await documentNFT.mint(ownerAddress, documentId);

// Transfer ownership
await documentNFT.transferFrom(fromAddress, toAddress, documentId);

// Check owner
const owner = await documentNFT.ownerOf(documentId);
```
</Tabs.Tab>

<Tabs.Tab>
```python
# Mint unique document token
tx = document_nft.functions.mint(owner_address, document_id).build_transaction({
    'from': account.address,
    'nonce': w3.eth.get_transaction_count(account.address),
})
signed_tx = account.sign_transaction(tx)
tx_hash = w3.eth.send_raw_transaction(signed_tx.raw_transaction)

# Transfer ownership
tx = document_nft.functions.transferFrom(from_address, to_address, document_id).build_transaction({
    'from': account.address,
    'nonce': w3.eth.get_transaction_count(account.address),
})
signed_tx = account.sign_transaction(tx)
tx_hash = w3.eth.send_raw_transaction(signed_tx.raw_transaction)

# Check owner
owner = document_nft.functions.ownerOf(document_id).call()
```
</Tabs.Tab>
</Tabs>

### Multi-Tokens (ERC-1155) - Batch Documents

Use for multiple copies or mixed types:
- Event tickets (1000 identical)
- Share certificates (varying classes)
- Licenses with quantities

<Tabs items={['cURL', 'TypeScript', 'Python']}>
<Tabs.Tab>
```bash
# Mint 100 copies of document type 5
curl -X POST https://api.trustwithintegra.com/v1/tokens/multi/mint \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $API_KEY" \
  -d '{
    "ownerAddress": "0xabc...",
    "tokenType": 5,
    "amount": 100,
    "metadata": {
      "name": "Event Ticket - VIP",
      "type": "ticket"
    }
  }'

# Transfer 10 to someone
curl -X POST https://api.trustwithintegra.com/v1/tokens/multi/transfer \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $API_KEY" \
  -d '{
    "fromAddress": "0xabc...",
    "toAddress": "0xdef...",
    "tokenType": 5,
    "amount": 10
  }'

# Check balance
curl -X GET "https://api.trustwithintegra.com/v1/tokens/multi/balance?address=0xabc...&tokenType=5" \
  -H "Authorization: Bearer $API_KEY"
```
</Tabs.Tab>

<Tabs.Tab>
```typescript
// Mint 100 copies of document type 5
await multiToken.mint(ownerAddress, tokenType: 5, amount: 100);

// Transfer 10 to someone
await multiToken.safeTransferFrom(
  fromAddress,
  toAddress,
  tokenType: 5,
  amount: 10,
  "0x" // data
);

// Check balance
const balance = await multiToken.balanceOf(ownerAddress, tokenType: 5);
```
</Tabs.Tab>

<Tabs.Tab>
```python
# Mint 100 copies of document type 5
tx = multi_token.functions.mint(owner_address, 5, 100, b'').build_transaction({
    'from': account.address,
    'nonce': w3.eth.get_transaction_count(account.address),
})
signed_tx = account.sign_transaction(tx)
tx_hash = w3.eth.send_raw_transaction(signed_tx.raw_transaction)

# Transfer 10 to someone
tx = multi_token.functions.safeTransferFrom(
    from_address,
    to_address,
    5,  # tokenType
    10,  # amount
    b''  # data
).build_transaction({
    'from': account.address,
    'nonce': w3.eth.get_transaction_count(account.address),
})
signed_tx = account.sign_transaction(tx)
tx_hash = w3.eth.send_raw_transaction(signed_tx.raw_transaction)

# Check balance
balance = multi_token.functions.balanceOf(owner_address, 5).call()
```
</Tabs.Tab>
</Tabs>

## Quick Start: Tokenize a Document

<Tabs items={['cURL', 'TypeScript', 'Python']}>
<Tabs.Tab>
```bash
#!/bin/bash

# 1. Register document first
DOCUMENT_HASH=$(keccak256 document.pdf)
URI="ipfs://QmMetadata..."

curl -X POST https://api.trustwithintegra.com/v1/documents/register \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $API_KEY" \
  -d "{
    \"documentHash\": \"$DOCUMENT_HASH\",
    \"uri\": \"$URI\"
  }"

# 2. Mint NFT for document
response=$(curl -X POST https://api.trustwithintegra.com/v1/tokens/nft/mint \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $API_KEY" \
  -d "{
    \"ownerAddress\": \"$OWNER_ADDRESS\",
    \"documentHash\": \"$DOCUMENT_HASH\",
    \"metadata\": {
      \"name\": \"Document Token\",
      \"documentHash\": \"$DOCUMENT_HASH\"
    }
  }")

# 3. Get token ID
TOKEN_ID=$(echo "$response" | jq -r '.tokenId')
echo "Token is now tradeable: $TOKEN_ID"
```
</Tabs.Tab>

<Tabs.Tab>
```typescript
// 1. Register document first
const hash = ethers.keccak256(document);
await registry.registerDocument(hash, uri);

// 2. Mint NFT for document
const tokenizer = new ethers.Contract(TOKENIZER_ADDRESS, ABI, wallet);
await tokenizer.mintDocumentToken(
  ownerAddress,
  hash,
  metadata
);

// 3. Token is now tradeable
const tokenId = await tokenizer.getTokenId(hash);
```
</Tabs.Tab>

<Tabs.Tab>
```python
# 1. Register document first
hash = w3.keccak(document)
tx = registry.functions.registerDocument(hash, uri).build_transaction({
    'from': account.address,
    'nonce': w3.eth.get_transaction_count(account.address),
})
signed_tx = account.sign_transaction(tx)
tx_hash = w3.eth.send_raw_transaction(signed_tx.raw_transaction)
w3.eth.wait_for_transaction_receipt(tx_hash)

# 2. Mint NFT for document
tokenizer = w3.eth.contract(address=TOKENIZER_ADDRESS, abi=ABI)
tx = tokenizer.functions.mintDocumentToken(
    owner_address,
    hash,
    metadata
).build_transaction({
    'from': account.address,
    'nonce': w3.eth.get_transaction_count(account.address),
})
signed_tx = account.sign_transaction(tx)
tx_hash = w3.eth.send_raw_transaction(signed_tx.raw_transaction)

# 3. Token is now tradeable
token_id = tokenizer.functions.getTokenId(hash).call()
```
</Tabs.Tab>
</Tabs>

## Complete Example

<Tabs items={['cURL', 'TypeScript', 'Python']}>
<Tabs.Tab>
```bash
#!/bin/bash
create_tradeable_real_estate_token() {
  deed_file=$1
  property_address=$2
  owner=$3
  value=$4

  # Hash deed
  deed_hash=$(keccak256 "$deed_file")

  # Create metadata JSON
  metadata=$(cat <<EOF
{
  "property": "$property_address",
  "owner": "$owner",
  "value": "$value",
  "documentHash": "$deed_hash"
}
EOF
)

  # Upload metadata to IPFS
  metadata_uri=$(echo "$metadata" | ipfs add -Q)
  metadata_uri="ipfs://$metadata_uri"

  # Register document
  curl -X POST https://api.trustwithintegra.com/v1/documents/register \
    -H "Content-Type: application/json" \
    -H "Authorization: Bearer $API_KEY" \
    -d "{
      \"documentHash\": \"$deed_hash\",
      \"uri\": \"$metadata_uri\"
    }"

  # Mint NFT
  response=$(curl -X POST https://api.trustwithintegra.com/v1/tokens/nft/mint \
    -H "Content-Type: application/json" \
    -H "Authorization: Bearer $API_KEY" \
    -d "{
      \"ownerAddress\": \"$OWNER_ADDRESS\",
      \"metadataUri\": \"$metadata_uri\"
    }")

  token_id=$(echo "$response" | jq -r '.tokenId')
  echo "Property tokenized! Token ID: $token_id"
  echo "$token_id"
}

# Usage
create_tradeable_real_estate_token "deed.pdf" "123 Main St" "John Doe" "\$500,000"
```
</Tabs.Tab>

<Tabs.Tab>
```typescript
async function createTradeableRealEstateToken(deed: Buffer) {
  // Hash deed
  const deedHash = ethers.keccak256(deed);

  // Metadata
  const metadata = {
    property: "123 Main St",
    owner: "John Doe",
    value: "$500,000",
    documentHash: deedHash
  };

  // Upload metadata
  const metadataUri = await uploadToIPFS(JSON.stringify(metadata));

  // Register document
  await registry.registerDocument(deedHash, metadataUri);

  // Mint NFT
  const tx = await nftContract.mint(
    ownerAddress,
    metadataUri
  );

  const receipt = await tx.wait();
  const tokenId = receipt.logs[0].topics[3]; // Transfer event

  console.log('Property tokenized! Token ID:', tokenId);
  return tokenId;
}
```
</Tabs.Tab>

<Tabs.Tab>
```python
async def create_tradeable_real_estate_token(deed: bytes):
    # Hash deed
    deed_hash = w3.keccak(deed)

    # Metadata
    metadata = {
        "property": "123 Main St",
        "owner": "John Doe",
        "value": "$500,000",
        "documentHash": deed_hash.hex()
    }

    # Upload metadata
    metadata_uri = await upload_to_ipfs(json.dumps(metadata))

    # Register document
    tx = registry.functions.registerDocument(deed_hash, metadata_uri).build_transaction({
        'from': account.address,
        'nonce': w3.eth.get_transaction_count(account.address),
    })
    signed_tx = account.sign_transaction(tx)
    tx_hash = w3.eth.send_raw_transaction(signed_tx.raw_transaction)
    w3.eth.wait_for_transaction_receipt(tx_hash)

    # Mint NFT
    tx = nft_contract.functions.mint(
        owner_address,
        metadata_uri
    ).build_transaction({
        'from': account.address,
        'nonce': w3.eth.get_transaction_count(account.address),
    })

    signed_tx = account.sign_transaction(tx)
    tx_hash = w3.eth.send_raw_transaction(signed_tx.raw_transaction)
    receipt = w3.eth.wait_for_transaction_receipt(tx_hash)

    # Extract token ID from Transfer event
    transfer_event = nft_contract.events.Transfer().process_receipt(receipt)
    token_id = transfer_event[0]['args']['tokenId']

    print(f'Property tokenized! Token ID: {token_id}')
    return token_id
```
</Tabs.Tab>
</Tabs>

## Advanced Token Operations

### Batch Minting

<Tabs items={['cURL', 'TypeScript', 'Python']}>
<Tabs.Tab>
```bash
# Batch mint multiple NFTs
curl -X POST https://api.trustwithintegra.com/v1/tokens/nft/batch-mint \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $API_KEY" \
  -d '{
    "ownerAddress": "0xabc...",
    "tokens": [
      {"documentId": "doc-1", "metadataUri": "ipfs://Qm1..."},
      {"documentId": "doc-2", "metadataUri": "ipfs://Qm2..."},
      {"documentId": "doc-3", "metadataUri": "ipfs://Qm3..."}
    ]
  }'
```
</Tabs.Tab>

<Tabs.Tab>
```typescript
// Batch mint multiple NFTs
const documentIds = ["doc-1", "doc-2", "doc-3"];
const metadataUris = ["ipfs://Qm1...", "ipfs://Qm2...", "ipfs://Qm3..."];

await nftContract.batchMint(ownerAddress, documentIds, metadataUris);
```
</Tabs.Tab>

<Tabs.Tab>
```python
# Batch mint multiple NFTs
document_ids = ["doc-1", "doc-2", "doc-3"]
metadata_uris = ["ipfs://Qm1...", "ipfs://Qm2...", "ipfs://Qm3..."]

tx = nft_contract.functions.batchMint(
    owner_address,
    document_ids,
    metadata_uris
).build_transaction({
    'from': account.address,
    'nonce': w3.eth.get_transaction_count(account.address),
})

signed_tx = account.sign_transaction(tx)
tx_hash = w3.eth.send_raw_transaction(signed_tx.raw_transaction)
```
</Tabs.Tab>
</Tabs>

### Token Marketplace Integration

<Tabs items={['cURL', 'TypeScript', 'Python']}>
<Tabs.Tab>
```bash
# List token for sale
curl -X POST https://api.trustwithintegra.com/v1/marketplace/list \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $API_KEY" \
  -d '{
    "tokenId": "123",
    "price": "1.5",
    "currency": "ETH"
  }'

# Buy listed token
curl -X POST https://api.trustwithintegra.com/v1/marketplace/buy \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $API_KEY" \
  -d '{
    "listingId": "456",
    "buyerAddress": "0xdef..."
  }'
```
</Tabs.Tab>

<Tabs.Tab>
```typescript
// Approve marketplace to transfer token
await nftContract.approve(MARKETPLACE_ADDRESS, tokenId);

// List token for sale
await marketplace.listToken(
  nftContract.address,
  tokenId,
  ethers.parseEther("1.5") // price in ETH
);

// Buy listed token
await marketplace.buyToken(listingId, { value: ethers.parseEther("1.5") });
```
</Tabs.Tab>

<Tabs.Tab>
```python
# Approve marketplace to transfer token
tx = nft_contract.functions.approve(MARKETPLACE_ADDRESS, token_id).build_transaction({
    'from': account.address,
    'nonce': w3.eth.get_transaction_count(account.address),
})
signed_tx = account.sign_transaction(tx)
tx_hash = w3.eth.send_raw_transaction(signed_tx.raw_transaction)
w3.eth.wait_for_transaction_receipt(tx_hash)

# List token for sale
price = w3.to_wei(1.5, 'ether')
tx = marketplace.functions.listToken(
    nft_contract.address,
    token_id,
    price
).build_transaction({
    'from': account.address,
    'nonce': w3.eth.get_transaction_count(account.address),
})
signed_tx = account.sign_transaction(tx)
tx_hash = w3.eth.send_raw_transaction(signed_tx.raw_transaction)

# Buy listed token
tx = marketplace.functions.buyToken(listing_id).build_transaction({
    'from': account.address,
    'nonce': w3.eth.get_transaction_count(account.address),
    'value': price
})
signed_tx = account.sign_transaction(tx)
tx_hash = w3.eth.send_raw_transaction(signed_tx.raw_transaction)
```
</Tabs.Tab>
</Tabs>

## Next Steps

- **[Code Examples](./code-examples)**: Full applications
- **[API Reference](./api-reference)**: Contract interfaces
- **[FAQ](./faq)**: Common questions
