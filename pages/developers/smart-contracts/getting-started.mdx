import { Tabs } from 'nextra/components'

# Getting Started

This guide will help you set up your development environment and make your first interaction with Integra smart contracts.

## Prerequisites

### Basic Requirements
- **Node.js** (v18 or higher): [Download here](https://nodejs.org/)
- **Python** (v3.8 or higher) - if using Python
- **Code Editor**: VS Code, Cursor, or your preferred editor
- **Terminal/Command Line**: Basic familiarity with command line

### Blockchain Basics (Optional but Helpful)
If you're new to blockchain development, here are concepts worth understanding:
- **Wallet**: A digital account that holds cryptocurrency and interacts with blockchain
- **Gas**: Transaction fees paid in cryptocurrency (like ETH) to execute smart contracts
- **Transaction**: Any operation that changes blockchain state
- **Address**: A unique identifier for an account (like `0x1234...`)

Don't worry if these are unfamiliar - we'll explain as we go!

## Step 1: Get a Wallet

You need a wallet to interact with blockchain. We recommend:

### MetaMask (Browser Extension)
1. Install from [metamask.io](https://metamask.io/)
2. Create a new wallet
3. **IMPORTANT**: Save your secret recovery phrase securely (never share it!)
4. Fund your wallet with test ETH (we'll show you how)

### Alternative: Programmatic Wallet
If you're building a backend service, you can use a private key directly in your code (for testing only - never expose real keys!).

## Step 2: Get Test Cryptocurrency

To interact with smart contracts, you need cryptocurrency for gas fees. For development, use **test networks** (testnets) which have free test crypto.

### Recommended Testnets

**Sepolia (Ethereum Testnet)**
- Faucet: https://sepoliafaucet.com/
- Best for: General development
- Add to MetaMask: [Chainlist](https://chainlist.org/) → Search "Sepolia"

**Base Sepolia (Base Testnet)**
- Faucet: https://www.coinbase.com/faucets/base-ethereum-sepolia-faucet
- Best for: Production-like testing
- Low gas fees

**Polygon Mumbai (Being deprecated, use Amoy)**
- Faucet: https://faucet.polygon.technology/
- Best for: Fast, cheap transactions

### Getting Test ETH
1. Visit a faucet website
2. Enter your wallet address (starts with `0x...`)
3. Complete any verification (captcha, etc.)
4. Wait 1-5 minutes for test ETH to arrive

## Step 3: Install Development Tools

<Tabs items={['cURL', 'TypeScript', 'Python']}>
<Tabs.Tab>
```bash
# For cURL, you just need curl installed (usually pre-installed on Linux/Mac)
# Check if curl is available:
curl --version

# For working with Integra API, you'll need an API key
# Store it securely:
export INTEGRA_API_KEY="your-api-key-here"

# Optional: Install jq for parsing JSON responses
# macOS:
brew install jq

# Linux:
sudo apt-get install jq

# Test API connection:
curl -X GET https://api.trustwithintegra.com/v1/status \
  -H "Authorization: Bearer $INTEGRA_API_KEY"
```
</Tabs.Tab>

<Tabs.Tab>
```bash
# Create a new project
mkdir my-integra-app
cd my-integra-app
npm init -y

# Install ethers.js (Web3 library)
npm install ethers@6

# Install TypeScript
npm install --save-dev typescript @types/node
npx tsc --init

# Optional: Install Hardhat for smart contract development
npm install --save-dev hardhat
npx hardhat init
# Choose "Create a TypeScript project"

# Install additional dependencies
npm install @openzeppelin/contracts
```
</Tabs.Tab>

<Tabs.Tab>
```bash
# Create a new project
mkdir my-integra-app
cd my-integra-app

# Create virtual environment (recommended)
python3 -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate

# Install web3.py (Web3 library for Python)
pip install web3

# Install additional useful libraries
pip install python-dotenv  # For environment variables
pip install eth-account    # For wallet management

# Create requirements.txt
pip freeze > requirements.txt

# Optional: Install additional tools
pip install ipython  # Better Python REPL
```
</Tabs.Tab>
</Tabs>

## Step 4: Connect to Integra

### Quick Test: Read from Contract

<Tabs items={['cURL', 'TypeScript', 'Python']}>
<Tabs.Tab>
```bash
# Check if a document is registered via API
DOCUMENT_HASH="0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"

curl -X GET "https://api.trustwithintegra.com/v1/documents/verify?hash=$DOCUMENT_HASH" \
  -H "Authorization: Bearer $INTEGRA_API_KEY" \
  | jq '.'

# Response:
# {
#   "registered": false,
#   "attestationId": null
# }
```
</Tabs.Tab>

<Tabs.Tab>
```typescript
// read-test.ts
import { ethers } from 'ethers';

// Connect to Sepolia testnet
const provider = new ethers.JsonRpcProvider('https://sepolia.infura.io/v3/YOUR_INFURA_KEY');

// Integra Document Registry address on Sepolia
const REGISTRY_ADDRESS = '0x...'; // We'll provide this

// Simple contract interface
const abi = [
  "function isDocumentRegistered(bytes32 documentHash) view returns (bool)"
];

async function checkDocument() {
  const contract = new ethers.Contract(REGISTRY_ADDRESS, abi, provider);

  // Example document hash
  const docHash = ethers.id("test-document");

  const isRegistered = await contract.isDocumentRegistered(docHash);
  console.log('Document registered:', isRegistered);
}

checkDocument();
```

Run it:
```bash
npx ts-node read-test.ts
# Or compile and run:
npx tsc read-test.ts
node read-test.js
```
</Tabs.Tab>

<Tabs.Tab>
```python
# read_test.py
from web3 import Web3

# Connect to Sepolia testnet
w3 = Web3(Web3.HTTPProvider('https://sepolia.infura.io/v3/YOUR_INFURA_KEY'))

# Verify connection
if not w3.is_connected():
    raise Exception("Failed to connect to network")

# Integra Document Registry address on Sepolia
REGISTRY_ADDRESS = '0x...'  # We'll provide this

# Simple contract interface
abi = [{
    "name": "isDocumentRegistered",
    "type": "function",
    "stateMutability": "view",
    "inputs": [{"name": "documentHash", "type": "bytes32"}],
    "outputs": [{"name": "", "type": "bool"}]
}]

def check_document():
    contract = w3.eth.contract(address=REGISTRY_ADDRESS, abi=abi)

    # Example document hash
    doc_hash = w3.keccak(text="test-document")

    is_registered = contract.functions.isDocumentRegistered(doc_hash).call()
    print(f'Document registered: {is_registered}')

if __name__ == '__main__':
    check_document()
```

Run it:
```bash
python read_test.py
```
</Tabs.Tab>
</Tabs>

### Next: Write to Contract

<Tabs items={['cURL', 'TypeScript', 'Python']}>
<Tabs.Tab>
```bash
# register-test.sh
#!/bin/bash

# Set your API key
export INTEGRA_API_KEY="your-api-key-here"

# Hash of document content
DOCUMENT_HASH=$(echo -n "my-important-document" | keccak256)

# IPFS or HTTP URL to document metadata
URI="ipfs://QmX..."

# Send registration request
response=$(curl -X POST https://api.trustwithintegra.com/v1/documents/register \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $INTEGRA_API_KEY" \
  -d "{
    \"documentHash\": \"$DOCUMENT_HASH\",
    \"uri\": \"$URI\"
  }")

echo "$response" | jq '.'

# Extract transaction hash
tx_hash=$(echo "$response" | jq -r '.transactionHash')
echo "Transaction sent: $tx_hash"

# Check status
sleep 5
curl -X GET "https://api.trustwithintegra.com/v1/transactions/$tx_hash" \
  -H "Authorization: Bearer $INTEGRA_API_KEY" \
  | jq '.'
```
</Tabs.Tab>

<Tabs.Tab>
```typescript
// register-test.ts
import { ethers } from 'ethers';

// Connect with your wallet
const provider = new ethers.JsonRpcProvider('https://sepolia.infura.io/v3/YOUR_INFURA_KEY');
const wallet = new ethers.Wallet('YOUR_PRIVATE_KEY', provider);

const REGISTRY_ADDRESS = '0x...';
const abi = [
  "function registerDocument(bytes32 documentHash, string uri) returns (bytes32)"
];

async function registerDocument() {
  const contract = new ethers.Contract(REGISTRY_ADDRESS, abi, wallet);

  // Hash of document content
  const docHash = ethers.id("my-important-document");

  // IPFS or HTTP URL to document metadata
  const uri = "ipfs://QmX...";

  // Send transaction
  const tx = await contract.registerDocument(docHash, uri);
  console.log('Transaction sent:', tx.hash);

  // Wait for confirmation
  const receipt = await tx.wait();
  console.log('Document registered! Block:', receipt.blockNumber);
}

registerDocument();
```
</Tabs.Tab>

<Tabs.Tab>
```python
# register_test.py
from web3 import Web3
from eth_account import Account
import os

# Connect with your wallet
w3 = Web3(Web3.HTTPProvider('https://sepolia.infura.io/v3/YOUR_INFURA_KEY'))
account = Account.from_key(os.environ['PRIVATE_KEY'])

REGISTRY_ADDRESS = '0x...'
abi = [{
    "name": "registerDocument",
    "type": "function",
    "inputs": [
        {"name": "documentHash", "type": "bytes32"},
        {"name": "uri", "type": "string"}
    ],
    "outputs": [{"name": "", "type": "bytes32"}]
}]

def register_document():
    contract = w3.eth.contract(address=REGISTRY_ADDRESS, abi=abi)

    # Hash of document content
    doc_hash = w3.keccak(text="my-important-document")

    # IPFS or HTTP URL to document metadata
    uri = "ipfs://QmX..."

    # Build transaction
    tx = contract.functions.registerDocument(doc_hash, uri).build_transaction({
        'from': account.address,
        'nonce': w3.eth.get_transaction_count(account.address),
        'gas': 200000,
        'gasPrice': w3.eth.gas_price
    })

    # Sign and send transaction
    signed_tx = account.sign_transaction(tx)
    tx_hash = w3.eth.send_raw_transaction(signed_tx.raw_transaction)
    print(f'Transaction sent: {tx_hash.hex()}')

    # Wait for confirmation
    receipt = w3.eth.wait_for_transaction_receipt(tx_hash)
    print(f'Document registered! Block: {receipt["blockNumber"]}')

if __name__ == '__main__':
    register_document()
```
</Tabs.Tab>
</Tabs>

## Step 5: Get Contract Addresses

Integra smart contracts are deployed on multiple networks:

### Testnet Addresses
```
Sepolia:
  - Document Registry: 0x...
  - Attestation Provider: 0x...

Base Sepolia:
  - Document Registry: 0x...
  - Attestation Provider: 0x...
```

### Mainnet Addresses
```
Ethereum Mainnet:
  - Document Registry: 0x...
  - Attestation Provider: 0x...

Base:
  - Document Registry: 0x...
  - Attestation Provider: 0x...
```

*Note: Full list available in [API Reference](./api-reference)*

## Common Setup Issues

### "Insufficient funds for gas"

<Tabs items={['cURL', 'TypeScript', 'Python']}>
<Tabs.Tab>
```bash
# Check account balance via API
curl -X GET "https://api.trustwithintegra.com/v1/account/balance" \
  -H "Authorization: Bearer $INTEGRA_API_KEY" \
  | jq '.'

# Get more test ETH from faucet
# Make sure you're on the correct network
```
</Tabs.Tab>

<Tabs.Tab>
```typescript
// Check wallet balance
const balance = await provider.getBalance(wallet.address);
console.log('Balance:', ethers.formatEther(balance), 'ETH');

// Get more test ETH from faucet if needed
```
</Tabs.Tab>

<Tabs.Tab>
```python
# Check wallet balance
balance = w3.eth.get_balance(account.address)
print(f'Balance: {w3.from_wei(balance, "ether")} ETH')

# Get more test ETH from faucet if needed
```
</Tabs.Tab>
</Tabs>

### "Cannot connect to network"

<Tabs items={['cURL', 'TypeScript', 'Python']}>
<Tabs.Tab>
```bash
# Test API connection
curl -X GET https://api.trustwithintegra.com/v1/status \
  -H "Authorization: Bearer $INTEGRA_API_KEY"

# Check if your API key is valid
# Sign up for an account if you don't have one
```
</Tabs.Tab>

<Tabs.Tab>
```typescript
// Test provider connection
const connected = await provider.getNetwork();
console.log('Connected to:', connected.name, 'Chain ID:', connected.chainId);

// Use a public RPC or sign up for Infura/Alchemy
```
</Tabs.Tab>

<Tabs.Tab>
```python
# Test provider connection
if w3.is_connected():
    chain_id = w3.eth.chain_id
    print(f'Connected to chain ID: {chain_id}')
else:
    print('Not connected to network')
    # Check your RPC URL
    # Use a public RPC or sign up for Infura/Alchemy
```
</Tabs.Tab>
</Tabs>

### "Nonce too low/high"

<Tabs items={['cURL', 'TypeScript', 'Python']}>
<Tabs.Tab>
```bash
# API handles nonce automatically
# If you get this error, wait 1-2 minutes and retry
```
</Tabs.Tab>

<Tabs.Tab>
```typescript
// Get current nonce
const nonce = await provider.getTransactionCount(wallet.address);
console.log('Current nonce:', nonce);

// Or reset your MetaMask account
// Settings → Advanced → Reset Account
```
</Tabs.Tab>

<Tabs.Tab>
```python
# Get current nonce
nonce = w3.eth.get_transaction_count(account.address)
print(f'Current nonce: {nonce}')

# Use 'pending' for the latest nonce including pending transactions
nonce = w3.eth.get_transaction_count(account.address, 'pending')
```
</Tabs.Tab>
</Tabs>

### "Contract not deployed"

<Tabs items={['cURL', 'TypeScript', 'Python']}>
<Tabs.Tab>
```bash
# Verify the contract exists
CONTRACT_ADDRESS="0x..."
curl -X GET "https://api.trustwithintegra.com/v1/contracts/$CONTRACT_ADDRESS" \
  -H "Authorization: Bearer $INTEGRA_API_KEY"

# Make sure you're using the correct network and address
```
</Tabs.Tab>

<Tabs.Tab>
```typescript
// Check if contract exists
const code = await provider.getCode(REGISTRY_ADDRESS);
if (code === '0x') {
  console.log('Contract not deployed at this address');
} else {
  console.log('Contract found!');
}
```
</Tabs.Tab>

<Tabs.Tab>
```python
# Check if contract exists
code = w3.eth.get_code(REGISTRY_ADDRESS)
if code == b'':
    print('Contract not deployed at this address')
else:
    print('Contract found!')
```
</Tabs.Tab>
</Tabs>

## Next Steps

Now that you're set up:

1. **[Core Concepts](./core-concepts)**: Understand how Integra works
2. **[Document Registration](./document-registration)**: Register your first document
3. **[Code Examples](./code-examples)**: See complete working examples

## Development Resources

- **Ethereum Documentation**: [ethereum.org/developers](https://ethereum.org/developers)
- **Ethers.js Docs**: [docs.ethers.org](https://docs.ethers.org/)
- **Web3.py Docs**: [web3py.readthedocs.io](https://web3py.readthedocs.io/)
- **OpenZeppelin Learn**: [docs.openzeppelin.com/learn](https://docs.openzeppelin.com/learn)
- **Hardhat Tutorial**: [hardhat.org/tutorial](https://hardhat.org/tutorial)

---

**Need help?** Join our Discord or email developers@integraledger.com
